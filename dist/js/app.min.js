var __=function(e){"use strict";if(void 0===window.__)return{random:function(e,t){if(!(t<=e||e<0||t<0))return Math.floor(Math.random()*(t-e+1)+e)}}}();!function(e){"use strict";var t,n,i,o,s,a,c,r,l,u,g,d,f,m,p,h,v,_,y,C,L,w,E,B,S,N=(t=document.getElementsByClassName("app__canvasWrapper-canvas")[0],n=t.getContext("2d"),i=document.getElementsByClassName("app__canvasWrapper")[0],o=document.getElementsByClassName("app__panel")[0],s=document.getElementsByClassName("app")[0],a=document.getElementsByClassName("app__canvasWrapper-info-lifes")[0],c=document.getElementsByClassName("app__canvasWrapper-info-clock")[0],r=document.getElementsByClassName("app__canvasWrapper-info-clock-actual")[0],l=document.getElementsByClassName("app__canvasWrapper-info-clock-best")[0],u=document.getElementsByClassName("icon-heart")[0],g=document.querySelector(".app__panel .icon-fullscreen"),d=document.querySelector(".app__panel .icon-minimize"),f=document.querySelector(".app__panel .icon-medal"),m=document.querySelector(".app__panel .icon-restart"),p=document.querySelector(".app__panel .icon-config"),h=document.querySelector(".app__panel .icon-rules"),v=document.getElementsByClassName("icon-close"),_=document.getElementsByClassName("app__canvasWrapper-prompt-start")[0],y=document.getElementsByClassName("app__canvasWrapper-prompt-end")[0],C=document.getElementsByClassName("app__overlay")[0],L=document.getElementsByClassName("app__popup-config")[0],w=document.getElementsByClassName("app__popup-rules")[0],E="blue",B=.1,S="white",{getCnv:function(){return t},getContext:function(){return n},getCnvHeight:function(){return 407},getCnvWidth:function(){return 318},getCanvasWrapper:function(){return i},getCanvasWrapperWidth:function(){return 318},getCanvasWrapperHeight:function(){return 407},getApp:function(){return s},getAppWidth:function(){return 318},getAppHeight:function(){return 447},getPanel:function(){return o},getPanelHeight:function(){return 40},getLifeCounter:function(){return a},getHeartIcon:function(){return u},getMinimizeIcon:function(){return d},getFullscreenIcon:function(){return g},getMedalIcon:function(){return f},getRestartIcon:function(){return m},getConfigIcon:function(){return p},getRulesIcon:function(){return h},getCloseIcons:function(){return v},getClock:function(){return c},getClockActualTime:function(){return r},getClockBestTime:function(){return l},getPromptStart:function(){return _},getPromptEnd:function(){return y},getOverlay:function(){return C},getConfigPopup:function(){return L},getRulesPopup:function(){return w},getXo:function(){return 159},getYo:function(){return 203.5},getBallRadius:function(){return 15},getBallColor:function(){return E},getGravity:function(){return B},getColumnsColor:function(){return S},getColumnsWidth:function(){return 20},getGapTopMin:function(){return 0},getGapTopMax:function(){return.65},getGapHeightMin:function(){return.2},getGapHeightMax:function(){return.35},getLifes:function(){return 2},GetDbName:function(){return"madballDB"},getDbResultsKey:function(){return"results"},getDbConfigKey:function(){return"config"},getDbResultsSize:function(){return"10"},setGravity:function(e){B=e},setBallColor:function(e){E=e},setColumnsColor:function(e){S=e}});e.config=N,window.madball=e}(window.madball||{}),function(g,i){"use strict";var e=function(){function t(){this.ctx=g.config.getContext(),this.canvas_h=g.config.getCnvHeight(),this.x=g.config.getXo(),this.y=g.config.getYo(),this.dx=0,this.dy=0,this.g=g.config.getGravity(),this.radius=g.config.getBallRadius(),this.color=g.config.getBallColor(),this.draw=function(e){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),this.ctx.fillStyle=this.color,this.ctx.fill()},this.move=function(){this.dy+=this.g,this.y=this.y+this.dy},this.jump=function(){this.dy=-4},this.bounce_off=function(){this.y<this.radius?this.dy=5:this.y>this.canvas_h-this.radius&&(this.dy=-5)}}function n(){this.ctx=g.config.getContext(),this.canvas_h=g.config.getCnvHeight(),this.x=g.config.getCnvWidth(),this.col_w=g.config.getColumnsWidth(),this.gap_top=i.random(this.canvas_h*g.config.getGapTopMin(),this.canvas_h*g.config.getGapTopMax()),this.gap_h=i.random(this.canvas_h*g.config.getGapHeightMin(),this.canvas_h*g.config.getGapHeightMax()),this.color=g.config.getColumnsColor(),this.draw=function(e){this.ctx.beginPath(),this.ctx.rect(this.x,0,this.col_w,this.gap_top),this.ctx.rect(this.x,this.gap_top+this.gap_h,this.col_w,this.canvas_h),this.ctx.fillStyle=this.color,this.ctx.fill()},this.move=function(){this.x--}}var e=function(){var t=!1,e=!1,n=g.config.getLifes(),i=g.config.getClockActualTime(),o=null,s=0,a=0,c=0,r=g.config.getPromptStart(),l=g.config.getPromptEnd();function u(){return c+(9<a?":":":0")+a+":"+s}return{getStarted:function(){return e},getLifes:function(){return n},getCollided:function(){return t},setCollided:function(e){t=e},reduceLife:function(){n--},gameOver:function(){return n<0},start:function(){e=!0,r.classList.add("is-hidden"),o=setInterval(function(){9<++s&&(s=0,a++),59<a&&(a=0,c++),i.innerHTML=u()},100)},showPromptStart:function(){r.classList.remove("is-hidden")},end:function(){e=!1,clearInterval(o),l.classList.remove("is-hidden")},timeToString:u}};return{Bird:function(e){return new t},Columns:function(e){return new n},Game:function(){return e()},DB:function(){return function(){var n=null,t=null,i=g.config.getDbResultsSize(),o=g.config.GetDbName(),e=g.config.getDbConfigKey(),s=g.config.getDbResultsKey();function a(e,t){(n=JSON.parse(localStorage.getItem("config")))[e]=t,localStorage.setItem("config",JSON.stringify(n))}function c(e){return e.sort()}return localStorage.getItem(g.config.GetDbName())||((n={})[e]={},n[s]=[],localStorage.setItem(o,JSON.stringify(n))),{addResult:function(e){n=JSON.parse(localStorage.getItem(o)),(t=n[s]).push(e),c(t),t.length>i&&(t.shift(),n[s]=t),localStorage.setItem(o,JSON.stringify(n))},showBestResult:function(){return n=JSON.parse(localStorage.getItem(o)),c(t=n[s]),t[t.length-1]},create:a,read:function(e){return(n=JSON.parse(localStorage.getItem("config")))[e]},update:function(e,t){a(e,t)},remove:function(e){delete(n=JSON.parse(localStorage.getItem("config")))[e],localStorage.setItem("config",JSON.stringify(n))}}}()}}}();g.model=e,window.madball=g}(window.madball||{},window.__),function(P,R){"use strict";var e=function(){var t=null,n=null,i=null,o=null,s=null,a=null,c=null,r=null,l=null,u=null,g=null,d=null,f=null,m=null,p=null,h=null,v=null,_=null,y=null,C=null,L=[],w=null,E=null,B=null,S=200,N=0,b=null,x=!1;function H(){p.classList.add("is-hidden"),m.classList.remove("is-hidden"),l.classList.remove("is-hidden"),c.classList.add("is-centered")}function I(){m.classList.add("is-hidden"),p.classList.remove("is-hidden"),l.classList.add("is-hidden"),c.classList.remove("is-centered")}function k(){d.classList.contains("is-hidden")?(d.classList.remove("is-hidden"),d.innerHTML="best: "+(JSON.parse(localStorage.getItem("madballDB")).results[0]?B.showBestResult():"0:00:0")):d.classList.add("is-hidden")}function M(){location.reload()}function T(){u.classList.contains("is-hidden")?u.classList.remove("is-hidden"):u.classList.add("is-hidden")}function O(){g.classList.contains("is-hidden")?g.classList.remove("is-hidden"):g.classList.add("is-hidden")}function W(e){e.target.parentElement.parentElement.classList.add("is-hidden")}function D(){N++,n.clearRect(0,0,i,o),w.draw(n),w.move();for(var e=L.length-1;-1<e;e--)L[e].draw(n),L[e].move();N%S==0&&(L.push(P.model.Columns(n)),S=R.random(160,200),N=0),L[0].x<-L[0].col_w&&L.shift(),w.bounce_off(),!E.getCollided()&&function(){for(var e=L.length-1;-1<e;e--)if(w.x+w.radius>=L[e].x&&w.x+w.radius<=L[e].x+L[e].col_w&&(w.y-w.radius<=L[e].gap_top||w.y+w.radius>=L[e].gap_top+L[e].gap_h))return!0}()&&(E.setCollided(!0),w.color="green",E.reduceLife(),setTimeout(function(){w.color="blue",E.setCollided(!1)},1500)),-1!=E.getLifes()?r.innerHTML=E.getLifes()+f.outerHTML:r.innerHTML=0+f.outerHTML,!E.gameOver()&&E.getStarted()?requestAnimationFrame(D):E.gameOver()&&E.getStarted()&&(cancelAnimationFrame(b),E.end(),B.addResult(E.timeToString()))}document.addEventListener("DOMContentLoaded",function(e){t=P.config.getCnv(),n=P.config.getContext(),i=P.config.getCnvWidth(),o=P.config.getCnvHeight(),a=P.config.getCanvasWrapper(),c=P.config.getApp(),s=P.config.getPanel(),d=P.config.getClockBestTime(),r=P.config.getLifeCounter(),f=P.config.getHeartIcon(),m=P.config.getMinimizeIcon(),p=P.config.getFullscreenIcon(),h=P.config.getMedalIcon(),v=P.config.getRestartIcon(),_=P.config.getConfigIcon(),y=P.config.getRulesIcon(),C=P.config.getCloseIcons(),l=P.config.getOverlay(),u=P.config.getConfigPopup(),g=P.config.getRulesPopup(),w=P.model.Bird(),L.push(P.model.Columns()),E=P.model.Game(),B=P.model.DB(),t.width=P.config.getCnvWidth(),t.height=P.config.getCnvHeight(),a.style.height=P.config.getCanvasWrapperHeight()+"px",s.style.height=P.config.getPanelHeight()+"px",c.style.width=P.config.getAppWidth()+"px",c.style.height=P.config.getAppHeight()+"px",D(),E.showPromptStart(),function(){document.onkeydown=function(e){e.preventDefault(),32==e.keyCode&&!x&&E.getStarted()?(w.jump(),x=!0):32!=e.keyCode||x||E.getStarted()||E.gameOver()?32!=e.keyCode||x||E.getStarted()||!E.gameOver()||location.reload():(E.start(),b=requestAnimationFrame(D))},document.onkeyup=function(e){x=!1},t.onclick=function(e){E.getStarted()?w.jump():E.gameOver()?location.reload():(E.start(),b=requestAnimationFrame(D))},p.addEventListener("click",H),m.addEventListener("click",I),h.addEventListener("click",k),v.addEventListener("click",M),_.addEventListener("click",T),y.addEventListener("click",O);for(var e=0;e<C.length;e++)C[e].addEventListener("click",W)}()})}();P.controller=e,window.madball=P}(window.madball||{},window.__),function(e){"use strict";var t=function(){var e=document.getElementsByClassName("pageHeader__nav")[0],t=document.getElementsByClassName("tab__results")[0],n=document.getElementsByClassName("tab__about")[0],i=document.getElementsByClassName("tab__play")[0],o=document.getElementsByClassName("pageHeader__nav-tab"),s=document.getElementsByClassName("pageHeader__toggle")[0],a=document.getElementsByClassName("footer")[0],c=document.getElementsByClassName("pageHeader")[0],r=(document.getElementsByTagName("body")[0],document.getElementsByClassName("results__list-item-time")),l=document.getElementsByClassName("results")[0],u=document.getElementsByClassName("about")[0],g=document.getElementsByClassName("section-app")[0],d=document.getElementsByClassName("special__wrapper-app")[0],f=document.getElementsByClassName("special__wrapper-header")[0],m=document.getElementsByClassName("icon-fullscreen")[0],p=null,h=null,v=null,_=null,y={tab__play:0,tab__results:null,tab__about:null};function C(){e.classList.contains("is-phone-nav-active")?(e.classList.remove("is-phone-nav-active"),s.classList.remove("is-toggle-nav-active")):(e.classList.add("is-phone-nav-active"),s.classList.add("is-toggle-nav-active"))}function L(){for(var e=0;e<o.length;e++)o[e].classList.remove("is-selected");if(window.matchMedia("(min-width: 650px)").matches)return!1;h=l.offsetTop,v=u.offsetTop,_=c.offsetHeight,0<=window.pageYOffset&&window.pageYOffset<h-_?i.classList.add("is-selected"):window.pageYOffset>=h-_&&window.pageYOffset<v-_?t.classList.add("is-selected"):n.classList.add("is-selected")}function w(){a.classList.remove("is-sticky"),a.offsetTop+null<window.innerHeight&&a.classList.add("is-sticky")}function E(){f.style.height=c.offsetHeight+"px",window.matchMedia("(min-width: 1050px)").matches?(_=c.offsetHeight,a.offsetTop,l.style.minHeight=window.innerHeight-_+"px",u.style.minHeight="100vh",d.style.height=l.offsetHeight+u.offsetHeight+"px",g.style.height=window.innerHeight-_+"px"):(d.removeAttribute("style"),l.removeAttribute("style"),u.removeAttribute("style"),g.removeAttribute("style"))}function B(e){h=l.offsetTop,v=u.offsetTop,_=c.offsetHeight,y.tab__results=h-_,y.tab__about=v-_;for(var t=e.target.classList,n=0;n<t.length;n++)for(var i in y)i===t[n]&&window.scrollTo(0,y[i])}s.addEventListener("click",C),m.addEventListener("click",function(){e.classList.remove("is-phone-nav-active"),s.classList.remove("is-toggle-nav-active")}),t.addEventListener("click",function(e){B(e),C(),L()}),n.addEventListener("click",function(e){B(e),C(),L()}),i.addEventListener("click",function(e){B(e),C(),L()}),window.addEventListener("scroll",function(){L()}),window.addEventListener("resize",function(){E(),w(),L()}),document.addEventListener("DOMContentLoaded",function(){E(),function(){p=(p=JSON.parse(localStorage.getItem("madballDB"))).results.sort().reverse();for(var e=0;e<r.length;e++)p[e]?r[e].innerHTML=p[e]:r[e].innerHTML="..."}(),w(),L()})}();e.ui=t}(window);