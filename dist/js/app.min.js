var __=function(t){"use strict";if(void 0===window.__)return{random:function(t,e){if(!(e<=t||t<0||e<0))return Math.floor(Math.random()*(e-t+1)+t)}}}();!function(t){"use strict";var e,n,i,o,r,a,s,c,l,u,g,d,f,h,m,p,v,_,w,C=(e=document.getElementById("canvas"),n=e.getContext("2d"),i=window.matchMedia("(min-width: 721px )").matches?680:window.matchMedia("(min-width: 461px )").matches?455:318,o=Math.floor(i/.78),r=document.getElementsByClassName("template")[0],a=i,s=o,c=document.getElementsByClassName("template__info-lifes")[0],l=document.getElementsByClassName("template__icon-heart")[0],u=document.getElementsByClassName("template__info-clock")[0],g=document.getElementsByClassName("template__prompt-start")[0],d=document.getElementsByClassName("template__prompt-end")[0],f=15*i/340,h="blue",m=.1,p=i/2,v=o/2,_="white",w=20*i/340,{getCnv:function(){return e},getContext:function(){return n},getCnvHeight:function(){return o},getCnvWidth:function(){return i},getTemplate:function(){return r},getTemplateWidth:function(){return a},getTemplmateHeight:function(){return s},getLifeCounter:function(){return c},getHeartIcon:function(){return l},getClock:function(){return u},getPromptStart:function(){return g},getPromptEnd:function(){return d},getXo:function(){return p},getYo:function(){return v},getBallRadius:function(){return f},getBallColor:function(){return h},getGravity:function(){return m},getColumnsColor:function(){return _},getColumnsWidth:function(){return w},getGapTopMin:function(){return 0},getGapTopMax:function(){return.65},getGapHeightMin:function(){return.2},getGapHeightMax:function(){return.35},getLifes:function(){return 2},setGravity:function(t){m=t},setBallColor:function(t){h=t},setColumnsColor:function(t){_=t}});t.config=C,window.madball=t}(window.madball||{}),function(t){"use strict";if("undefined"!=typeof localStorage){var e=function(){var n=null;function i(t,e){(n=JSON.parse(localStorage.getItem("config")))[t]=e,localStorage.setItem("config",JSON.stringify(n))}return{create:i,read:function(t){return(n=JSON.parse(localStorage.getItem("config")))[t]},update:function(t,e){i(t,e)},delete:function(t){delete(n=JSON.parse(localStorage.getItem("config")))[t],localStorage.setItem("config",JSON.stringify(n))}}}();t.db=e,window.madball=t}else alert("your browser does not support local storage\nTry to update you browser")}(window.madball||{}),function(i,o){"use strict";var t=function(){function e(t){this.canvas_h=i.config.getCnvHeight(),this.x=i.config.getXo(),this.y=i.config.getYo(),this.dx=0,this.dy=0,this.g=i.config.getGravity(),this.radius=i.config.getBallRadius(),this.color=i.config.getBallColor(),this.draw=function(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill()},this.move=function(){this.dy+=this.g,this.y=this.y+this.dy},this.jump=function(){this.dy=-4},this.bounce_off=function(){this.y<this.radius?this.dy=5:this.y>this.canvas_h-this.radius&&(this.dy=-5)}}function n(t){this.canvas_h=i.config.getCnvHeight(),this.x=i.config.getCnvWidth(),this.col_w=i.config.getColumnsWidth(),this.gap_top=o.random(this.canvas_h*i.config.getGapTopMin(),this.canvas_h*i.config.getGapTopMax()),this.gap_h=o.random(this.canvas_h*i.config.getGapHeightMin(),this.canvas_h*i.config.getGapHeightMax()),this.color=i.config.getColumnsColor(),this.draw=function(t){t.beginPath(),t.rect(this.x,0,this.col_w,this.gap_top),t.rect(this.x,this.gap_top+this.gap_h,this.col_w,this.canvas_h),t.fillStyle=this.color,t.fill()},this.move=function(){this.x--}}var t={collided:!1,started:!1,lifes:i.config.getLifes(),clock:i.config.getClock(),setInterval:null,d:0,s:0,m:0,prompt_start:i.config.getPromptStart(),prompt_end:i.config.getPromptEnd(),reduceLife:function(){this.lifes--},gameOver:function(){return this.lifes<0},start:function(){this.started=!0,this._hidePromptStart(),this._startClock()},showPromptStart:function(){this.prompt_start.classList.remove("is-hidden")},_hidePromptStart:function(){this.prompt_start.classList.add("is-hidden")},_showPromptEnd:function(){this.prompt_end.classList.remove("is-hidden")},end:function(){this.started=!1,this._stopClock(),this._showPromptEnd()},_startClock:function(){var t=this;t.setInterval=setInterval(function(){t.d++,9<t.d&&(t.d=0,t.s++),59<t.s&&(t.s=0,t.m++),t.clock.innerHTML=t.m+(9<t.s?":":":0")+t.s+":"+t.d},100)},_stopClock:function(){clearInterval(this.setInterval)}};return{Bird:function(t){return new e(t)},Columns:function(t){return new n(t)},Game:function(){return t}}}();i.model=t,window.madball=i}(window.madball||{},window.__),function(m,p){"use strict";var t=function(){var t=null,e=null,n=null,i=null,o=null,r=null,a=null,s=[],c=null,l=null,u=200,g=0,d=null,f=!1;function h(){g++,e.clearRect(0,0,n,i),c.draw(e),c.move();for(var t=s.length-1;-1<t;t--)s[t].draw(e),s[t].move();g%u==0&&(s.push(m.model.Columns(e)),u=p.random(160,200),g=0),s[0].x<-s[0].col_w&&s.shift(),c.bounce_off(),!l.collided&&function(){for(var t=s.length-1;-1<t;t--)if(c.x+c.radius>=s[t].x&&c.x+c.radius<=s[t].x+s[t].col_w&&(c.y-c.radius<=s[t].gap_top||c.y+c.radius>=s[t].gap_top+s[t].gap_h))return!0}()&&(l.collided=!0,c.color="green",l.reduceLife(),setTimeout(function(){c.color="blue",l.collided=!1},1500)),-1!=l.lifes?r.innerHTML=l.lifes+a.outerHTML:r.innerHTML=0+a.outerHTML,!l.gameOver()&&l.started?requestAnimationFrame(h):l.gameOver()&&l.started&&(l.end(),cancelAnimationFrame(d))}document.addEventListener("DOMContentLoaded",function(){t=m.config.getCnv(),e=m.config.getContext(),n=m.config.getCnvWidth(),i=m.config.getCnvHeight(),o=m.config.getTemplate(),r=m.config.getLifeCounter(),a=m.config.getHeartIcon(),c=m.model.Bird(e),s.push(m.model.Columns(e)),l=m.model.Game(),t.width=m.config.getCnvWidth(),t.height=m.config.getCnvHeight(),o.style.width=m.config.getTemplateWidth()+"px",o.style.height=m.config.getTemplmateHeight()+"px",h(),localStorage.getItem("config")?m.config.setGravity(parseFloat(m.db.read("gravity"))):(localStorage.setItem("config","{}"),m.db.create("gravity",m.config.getGravity())),l.showPromptStart(),document.onkeydown=function(t){32==t.keyCode&&!f&&l.started?(c.jump(),f=!0):32!=t.keyCode||f||l.started||l.gameOver()?32!=t.keyCode||f||l.started||!l.gameOver()||location.reload():(l.start(),d=requestAnimationFrame(h))},document.onkeyup=function(t){f=!1},t.onclick=function(t){l.started?c.jump():l.gameOver()?location.reload():(l.start(),d=requestAnimationFrame(h))}})}();m.controller=t,window.madball=m}(window.madball||{},window.__);