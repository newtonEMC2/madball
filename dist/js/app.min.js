var __=function(t){"use strict";if(void 0===window.__)return{random:function(t,e){if(!(e<=t||t<0||e<0))return Math.floor(Math.random()*(e-t+1)+t)}}}();!function(t){"use strict";var e,n,i,o,a,s,r,c,l,u,g,f,d,m,h,p,v,C,y,_=(e=document.getElementsByClassName("app__canvasWrapper-canvas")[0],n=e.getContext("2d"),i=document.getElementsByClassName("app__canvasWrapper")[0],o=document.getElementsByClassName("app")[0],a=document.getElementsByClassName("app__panel")[0],s=document.getElementsByClassName("app__canvasWrapper-info-lifes")[0],r=document.getElementsByClassName("app__canvasWrapper-info-clock")[0],c=document.getElementsByClassName("app__canvasWrapper-info-clock-actual")[0],l=document.getElementsByClassName("app__canvasWrapper-info-clock-best")[0],u=document.getElementsByClassName("icon-heart")[0],g=document.getElementsByClassName("icon-fullscreen")[0],f=document.getElementsByClassName("icon-minimize")[0],d=document.getElementsByClassName("icon-medal")[0],m=document.getElementsByClassName("app__canvasWrapper-prompt-start")[0],h=document.getElementsByClassName("app__canvasWrapper-prompt-end")[0],p=document.getElementsByClassName("app__overlay")[0],v="blue",C=.1,y="white",{getCnv:function(){return e},getContext:function(){return n},getCnvHeight:function(){return 407},getCnvWidth:function(){return 318},getCanvasWrapper:function(){return i},getCanvasWrapperWidth:function(){return 318},getCanvasWrapperHeight:function(){return 407},getApp:function(){return o},getPanel:function(){return a},getAppWidth:function(){return 318},getLifeCounter:function(){return s},getHeartIcon:function(){return u},getMinimizeIcon:function(){return f},getFullscreenIcon:function(){return g},getMedalIcon:function(){return d},getClock:function(){return r},getClockActualTime:function(){return c},getClockBestTime:function(){return l},getPromptStart:function(){return m},getPromptEnd:function(){return h},getOverlay:function(){return p},getXo:function(){return 159},getYo:function(){return 203.5},getBallRadius:function(){return 15},getBallColor:function(){return v},getGravity:function(){return C},getColumnsColor:function(){return y},getColumnsWidth:function(){return 20},getGapTopMin:function(){return 0},getGapTopMax:function(){return.65},getGapHeightMin:function(){return.2},getGapHeightMax:function(){return.35},getLifes:function(){return 2},GetDbName:function(){return"madballDB"},getDbResultsKey:function(){return"results"},getDbConfigKey:function(){return"config"},getDbResultsSize:function(){return"10"},setGravity:function(t){C=t},setBallColor:function(t){v=t},setColumnsColor:function(t){y=t}});t.config=_,window.madball=t}(window.madball||{}),function(g,i){"use strict";var t=function(){function e(t){this.canvas_h=g.config.getCnvHeight(),this.x=g.config.getXo(),this.y=g.config.getYo(),this.dx=0,this.dy=0,this.g=g.config.getGravity(),this.radius=g.config.getBallRadius(),this.color=g.config.getBallColor(),this.draw=function(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill()},this.move=function(){this.dy+=this.g,this.y=this.y+this.dy},this.jump=function(){this.dy=-4},this.bounce_off=function(){this.y<this.radius?this.dy=5:this.y>this.canvas_h-this.radius&&(this.dy=-5)}}function n(t){this.canvas_h=g.config.getCnvHeight(),this.x=g.config.getCnvWidth(),this.col_w=g.config.getColumnsWidth(),this.gap_top=i.random(this.canvas_h*g.config.getGapTopMin(),this.canvas_h*g.config.getGapTopMax()),this.gap_h=i.random(this.canvas_h*g.config.getGapHeightMin(),this.canvas_h*g.config.getGapHeightMax()),this.color=g.config.getColumnsColor(),this.draw=function(t){t.beginPath(),t.rect(this.x,0,this.col_w,this.gap_top),t.rect(this.x,this.gap_top+this.gap_h,this.col_w,this.canvas_h),t.fillStyle=this.color,t.fill()},this.move=function(){this.x--}}var t=function(){var e=!1,t=!1,n=g.config.getLifes(),i=g.config.getClockActualTime(),o=null,a=0,s=0,r=0,c=g.config.getPromptStart(),l=g.config.getPromptEnd();function u(){return r+(9<s?":":":0")+s+":"+a}return{getStarted:function(){return t},getLifes:function(){return n},getCollided:function(){return e},setCollided:function(t){e=t},reduceLife:function(){n--},gameOver:function(){return n<0},start:function(){t=!0,c.classList.add("is-hidden"),o=setInterval(function(){9<++a&&(a=0,s++),59<s&&(s=0,r++),i.innerHTML=u()},100)},showPromptStart:function(){c.classList.remove("is-hidden")},end:function(){t=!1,clearInterval(o),l.classList.remove("is-hidden")},timeToString:u}};return{Bird:function(t){return new e(t)},Columns:function(t){return new n(t)},Game:function(){return t()},DB:function(){return function(){var n=null,e=null,i=g.config.getDbResultsSize(),o=g.config.GetDbName(),t=g.config.getDbConfigKey(),a=g.config.getDbResultsKey();function s(t,e){(n=JSON.parse(localStorage.getItem("config")))[t]=e,localStorage.setItem("config",JSON.stringify(n))}function r(t){return t.sort()}return localStorage.getItem(g.config.GetDbName())||((n={})[t]={},n[a]=[],localStorage.setItem(o,JSON.stringify(n))),{addResult:function(t){n=JSON.parse(localStorage.getItem(o)),(e=n[a]).push(t),(e=r(e)).length>i&&(e.pop(),n[a]=e),localStorage.setItem(o,JSON.stringify(n))},showBestResult:function(){return n=JSON.parse(localStorage.getItem(o)),e=n[a],console.log(e),(e=r(e))[e.length-1]},create:s,read:function(t){return(n=JSON.parse(localStorage.getItem("config")))[t]},update:function(t,e){s(t,e)},remove:function(t){delete(n=JSON.parse(localStorage.getItem("config")))[t],localStorage.setItem("config",JSON.stringify(n))}}}()}}}();g.model=t,window.madball=g}(window.madball||{},window.__),function(S,B){"use strict";var t=function(){var t=null,e=null,n=null,i=null,o=null,a=null,s=null,r=null,c=null,l=null,u=null,g=null,f=null,d=null,m=[],h=null,p=null,v=null,C=200,y=0,_=null,L=!1;function w(){y++,e.clearRect(0,0,n,i),h.draw(e),h.move();for(var t=m.length-1;-1<t;t--)m[t].draw(e),m[t].move();y%C==0&&(m.push(S.model.Columns(e)),C=B.random(160,200),y=0),m[0].x<-m[0].col_w&&m.shift(),h.bounce_off(),!p.getCollided()&&function(){for(var t=m.length-1;-1<t;t--)if(h.x+h.radius>=m[t].x&&h.x+h.radius<=m[t].x+m[t].col_w&&(h.y-h.radius<=m[t].gap_top||h.y+h.radius>=m[t].gap_top+m[t].gap_h))return!0}()&&(p.setCollided(!0),h.color="green",p.reduceLife(),setTimeout(function(){h.color="blue",p.setCollided(!1)},1500)),-1!=p.getLifes()?s.innerHTML=p.getLifes()+u.outerHTML:s.innerHTML=0+u.outerHTML,!p.gameOver()&&p.getStarted()?requestAnimationFrame(w):p.gameOver()&&p.getStarted()&&(cancelAnimationFrame(_),p.end(),v.addResult(p.timeToString()))}document.addEventListener("DOMContentLoaded",function(){t=S.config.getCnv(),e=S.config.getContext(),n=S.config.getCnvWidth(),i=S.config.getCnvHeight(),o=S.config.getCanvasWrapper(),a=S.config.getApp(),c=S.config.getPanel(),l=S.config.getClockBestTime(),s=S.config.getLifeCounter(),u=S.config.getHeartIcon(),g=S.config.getMinimizeIcon(),f=S.config.getFullscreenIcon(),d=S.config.getMedalIcon(),r=S.config.getOverlay(),h=S.model.Bird(e),m.push(S.model.Columns(e)),p=S.model.Game(),v=S.model.DB(),t.width=S.config.getCnvWidth(),t.height=S.config.getCnvHeight(),o.style.height=S.config.getCanvasWrapperHeight()+"px",a.style.width=S.config.getAppWidth()+"px",a.style.height=S.config.getCanvasWrapperHeight()+c.offsetHeight+"px",w(),p.showPromptStart(),document.onkeydown=function(t){32==t.keyCode&&!L&&p.getStarted()?(h.jump(),L=!0):32!=t.keyCode||L||p.getStarted()||p.gameOver()?32!=t.keyCode||L||p.getStarted()||!p.gameOver()||location.reload():(p.start(),_=requestAnimationFrame(w))},document.onkeyup=function(t){L=!1},t.onclick=function(t){p.getStarted()?h.jump():p.gameOver()?location.reload():(p.start(),_=requestAnimationFrame(w))},f.onclick=function(t){f.classList.add("is-hidden"),g.classList.remove("is-hidden"),r.classList.remove("is-hidden"),a.classList.add("is-centered")},g.onclick=function(t){g.classList.add("is-hidden"),f.classList.remove("is-hidden"),r.classList.add("is-hidden"),a.classList.remove("is-centered")},d.onclick=function(t){l.classList.contains("is-hidden")?(l.classList.remove("is-hidden"),l.innerHTML="best: "+(JSON.parse(localStorage.getItem("madballDB")).results[0]?v.showBestResult():"0:00:0")):l.classList.add("is-hidden")}})}();S.controller=t,window.madball=S}(window.madball||{},window.__),function(t){"use strict";var e,n,i,o=(e=document.getElementsByClassName("pageHeader__nav")[0],n=document.getElementsByClassName("pageHeader__toggle")[0],i=document.getElementsByClassName("icon-fullscreen")[0],n.addEventListener("click",function(){e.classList.contains("is-phone-nav-active")?(e.classList.remove("is-phone-nav-active"),n.classList.remove("is-toggle-nav-active")):(e.classList.add("is-phone-nav-active"),n.classList.add("is-toggle-nav-active"))}),void i.addEventListener("click",function(){e.classList.remove("is-phone-nav-active"),n.classList.remove("is-toggle-nav-active")}));t.ui=o}(window);